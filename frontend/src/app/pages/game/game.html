<div class="col-8">
  <div class="game-section">
    @if (loading) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Loading game...</p>
    </div>
    } @else {
    <div class="scoreboard-container">
      <app-scoreboard [score]="score" [maxScore]="config.maxScore || 5">
      </app-scoreboard>
    </div>
    <div class="game-area">
      <app-game-field
        [ball]="ball"
        [rods]="rods"
        [config]="config"
        [team]="team"
        [activeRod]="activeRod"
        (keystate)="onKeyPresses($event)"
      >
      </app-game-field>
    </div>
    }

    <!-- Goal Celebration Overlay -->
    @if (showGoalCelebration) {
    <div class="goal-celebration-overlay">
      <div class="goal-celebration-content">
        <h1 class="goal-text">GOOOOOOOOALLLL!!!!!!</h1>
      </div>
    </div>
    }

    <!-- Game End Screen Overlay -->
    @if (showGameEndScreen) {
    <div class="game-end-overlay">
      <div class="game-end-content">
        <h1 class="game-over-title">Game Over!</h1>

        <div class="winner-announcement">
          @if (gameWinner === team) {
          <h2 class="winner-text victory">ðŸŽ‰ You Won! ðŸŽ‰</h2>
          } @else {
          <h2 class="winner-text defeat">You Lost</h2>
          }
          <p class="winner-subtitle">Team {{ gameWinner }} Wins!</p>
        </div>

        <div class="final-score-display">
          <h3>Final Score</h3>
          <div class="score-breakdown">
            <div class="team-score" [class.winner]="gameWinner === 1">
              <span class="team-label">Team 1</span>
              <span class="score-value">{{ finalScore?.team1 || 0 }}</span>
            </div>
            <div class="score-separator">-</div>
            <div class="team-score" [class.winner]="gameWinner === 2">
              <span class="team-label">Team 2</span>
              <span class="score-value">{{ finalScore?.team2 || 0 }}</span>
            </div>
          </div>
        </div>

        <button class="return-button" (click)="returnToMainMenu()">
          Return to Main Menu
        </button>
      </div>
    </div>
    }
  </div>
</div>
