<div class="spectator-container">
  <div class="spectator-header">
    <button class="back-button" (click)="goBack()">‚Üê Back to Games</button>
    <div class="spectator-info">
      <h2>Spectating Game</h2>
      <div class="spectator-count">
        <span class="icon">üëÄ</span>
        <span
          >{{ spectatorCount }} Spectator{{ spectatorCount !== 1 ? 's' : ''
          }}</span
        >
      </div>
    </div>
  </div>

  <div class="game-content" *ngIf="!isLoading && !error">
    <div class="scoreboard-container">
      <app-scoreboard
        [score]="{ team1: gameInfo?.score?.team1 || 0, team2: gameInfo?.score?.team2 || 0 }"
        [maxScore]="5"
      >
      </app-scoreboard>
    </div>

    <div class="game-field-container">
      <app-spectator-field [ball]="ball" [rods]="rods" [config]="config">
      </app-spectator-field>
    </div>

    <!-- Goal Celebration Overlay -->
    @if (showGoalCelebration) {
    <div class="goal-celebration-overlay">
      <div class="goal-celebration-content">
        <h1 class="goal-text">GOOOOOOOOALLLL!!!!!!</h1>
      </div>
    </div>
    }

    <!-- Game End Screen Overlay -->
    @if (showGameEndScreen) {
    <div class="game-end-overlay">
      <div class="game-end-content">
        <h1 class="game-over-title">Game Over!</h1>

        <div class="winner-announcement">
          <h2 class="winner-text">üéâ Team {{ gameWinner }} Wins! üéâ</h2>
        </div>

        <div class="final-score-display">
          <h3>Final Score</h3>
          <div class="score-breakdown">
            <div class="team-score" [class.winner]="gameWinner === 1">
              <span class="team-label">Team 1</span>
              <span class="score-value">{{ finalScore?.team1 || 0 }}</span>
            </div>
            <div class="score-separator">-</div>
            <div class="team-score" [class.winner]="gameWinner === 2">
              <span class="team-label">Team 2</span>
              <span class="score-value">{{ finalScore?.team2 || 0 }}</span>
            </div>
          </div>
        </div>

        <button class="return-button" (click)="returnToMainMenu()">
          Return to Main Menu
        </button>
      </div>
    </div>
    }
  </div>

  <div class="loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Connecting to game...</p>
  </div>

  <div class="error" *ngIf="error">
    <p>{{ error }}</p>
    <button (click)="goBack()">Go Back</button>
  </div>
</div>
